<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>SpotMicroAI:Learning-based gait modulation | Leon Eshuijs</title> <meta name="author" content="Leon Eshuijs"> <meta name="description" content="Evaluationg sim-to-real transfer of simulation RL agents trained for gait modulations on a real world robot dog (Jake). Jake is build via 3D printing (personnally and with external help) and hobby electronics."> <meta name="keywords" content="Leon Eshuijs"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8D%89&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://watermeleon.github.io/projects/SpotMicroAI/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Leon </span>Eshuijs</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> <script src="/assets/js/confetti.js"></script> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">SpotMicroAI:Learning-based gait modulation</h1> <p class="post-description">Evaluationg sim-to-real transfer of simulation RL agents trained for gait modulations on a real world robot dog (Jake). Jake is build via 3D printing (personnally and with external help) and hobby electronics.</p> </header> <article> <figure id="myfig"> <figure id="mysubfig3" class="subfigure" style="display: inline-block; width: 65%"> <img src="JakeRealPhoto_darkCrop.jpg"> </figure> </figure> <h1 id="abstract">Abstract</h1> <p>This project builds upon <a href="https://sites.google.com/view/drgmbc" rel="external nofollow noopener" target="_blank">D<sup>2</sup>-GMBC</a> and researches the importance of Reinforcement Learning (RL) algorithm complexity to the sim-to-real gap of gait modulation methods for locomotion learning. Previous work in learning-based locomotion, has shown that more complex RL algorithms can increase robustness. At the same time, other works found that reducing the complexity of the model by reducing the observation space also decreases the sim-to-real gap. This project inspects the influence of the complexity of RL algorithms on the sim-to-real gap. To achieve this, the Soft Actor-Critic algorithm from <a href="https://arxiv.org/abs/1812.11103" rel="external nofollow noopener" target="_blank">Haarnoja et al., 2018a</a> is applied to model the framework of D<sup>2</sup>-GMBC, and compared against ARS. We pretrain both algorithms in simulation and perform two evaluations on the real robot.</p> <p>For more information see the report or GitHub repository:</p> <div class="twobutton"> <button type="submit" onclick="window.open('Spotmicroai_report_LeonEshuijs.pdf')" class="button2">Report.</button> <a href="https://github.com/watermeleon/spot_micro" rel="external nofollow noopener" target="_blank"> <button class="button2">GitHub repo</button> </a> </div> <h1 id="experiment-1-simulation-training">Experiment 1: simulation training</h1> <p>From the learning curves in Figure 1 we see that although the starting reward of SAC is much lower, it learns much faster than ARS. This is in line with our expectations since ARS only updates its policy once per episode and SAC after each episode step after the replay buffer is full enough. However, we see that ARS achieves a much higher reward than SAC and that the reward of ARS always increases over time. Both this non-decreasing reward and the much higher reward of ARS training are likely a result of the multiple rollouts, since ARS performs multiple training episodes in parallel.</p> <figure id="myfig"> <figure id="mysubfig1" class="subfigure" style="display: inline-block; width: 45%"> <img src="SAC_training.png"><figcaption class="subfigcaption">(a) SAC</figcaption> </figure> <figure id="mysubfig2" class="subfigure" style="display: inline-block; width: 45%"> <img src="ARS_training.png"><figcaption class="subfigcaption">(b) ARS </figcaption> </figure> <figcaption><strong>Figure 1</strong> Training results in simulation</figcaption> </figure> <p>Before the quality of the RL agents on the real robot can be inspected we first compare the IMU data between the simulation and the real robot. To achieve this comparison, we use IK to make the robot apply a roll in both directions followed by a pitch in both directions. In Figure 2 three of the eight measurements are displayed. As seen from the Figures, the roll and pitch measurements are similar to those in the simulation. The angular twist also follows the same values as the simulation, but already contains a lot more noise, especially in the z-direction.</p> <figure id="myfig"> <figure id="mysubfig1" class="subfigure" style="display: inline-block; width: 31%"> <img src="IMU_res/roll.png"><figcaption class="subfigcaption">(a) Roll</figcaption> </figure> <figure id="mysubfig2" class="subfigure" style="display: inline-block; width: 31%"> <img src="IMU_res/pitch.png"><figcaption class="subfigcaption">(b)Pitch</figcaption> </figure> <figure id="mysubfig3" class="subfigure" style="display: inline-block; width: 25%"> <img src="IMU_res/angular_twist_x.png"><figcaption class="subfigcaption">(c) Angular twist: x-direction </figcaption> </figure> <figcaption><b>Figure 2</b>IMU results of the same movement in simulation and on the real robot. In red are the results of the real robot and in blue are the results of the simulation. </figcaption> </figure> <h1 id="experiment-2-traversal-speed">Experiment 2: traversal speed</h1> <p>From the table below we notice that neither of the agents was able to improve the forward walking speed above that of the baseline. When looking at the standard deviation we do note that the ARS agent has a more predictable walking speed, as indicated by the low standard deviation. The SAC agent is significantly slower than the other two and has an average walking speed of 21 seconds per meter compared to the 15 seconds per meter of the other two models. However, the walking speed was only one part of the reward signal, so to evaluate the walking stability we need to inspect the quality of the walk itself.</p> <table class="styled-table"> <thead> <tr> <div class="toptext"> <th></th> <th>Mean</th> <th>Standard deviation</th> <th>Failed Runs</th> </div> </tr> </thead> <tbody> <tr> <td>Baseline</td> <td>15.20</td> <td>2.56</td> <td>0</td> </tr> <tr> <td>ARS</td> <td>15.33</td> <td>0.94</td> <td>1</td> </tr> <tr> <td>SAC</td> <td>21.22</td> <td>1.47</td> <td>1</td> </tr> </tbody> </table> <h1 id="experiment-3-gait-analysis">Experiment 3: gait analysis</h1> <p>The ARS video shows adaptive behavior when the robot threatens to fall backward or forward. However, in the video it is also visible that the agent sometimes overcompensates, causing the body to swing from left to right or from front to back. Therefore we hypothesize that the reduced traversal time likely arises from the falling prevention behavior.</p> <p>The SAC agent displays even more complex falling prevention behavior. In the video, this is visible when the roll or pitch becomes too high, causing the agent to stand still for a short term. Thus the agent can not only modify one or two legs based on the body angles but when the IMU values diverge significantly enough, the agent even seems to halt all movement. However, from the start of the SAC clip, we see this falling prevention can hinder the gait significantly since it has troubles with starting the gait. Yet, after the agent has achieved a stable gait, the SAC agent demonstrates significant adaptive behavior.</p> <figure id="myfig"> <figure id="mysubfig1" class="subfigure" style="display: inline-block; width: 45%"> <img src="sac.gif"><figcaption class="subfigcaption">(a) SAC</figcaption> </figure> <figure id="mysubfig2" class="subfigure" style="display: inline-block; width: 45%"> <img src="ARS.gif"><figcaption class="subfigcaption">(b) ARS </figcaption> </figure> <figcaption><strong>Figure 1</strong> Real world gait modulation using the two RL agents</figcaption> </figure> <p>For the full video’s see link below;</p> <div class="ytvid"> <iframe width="520" height="315" src="https://www.youtube.com/embed/Ji8rXjD60mU"> </iframe> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Leon Eshuijs. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>